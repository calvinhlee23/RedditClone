<!DOCTYPE html>
<html>
  <body>
    <form action="/post" method="post">
      <% if post.persisted? %>
      <input type="hidden" name="_method" value="patch">
      <% end %>
      <%= auth_token %>

      <label for="title">Title:
        <input id = "title" type="text" name="post[title]"
        value= <%= "#{post.title}" %>>
      </label>
      <br>

      <label for="url">URL(optional):
        <input type="text" name="post[url]"
        value= <%= "#{post.url}"%>>
      </label>
      <br>

      <label for="content">Content
        <textarea name="post[content]"><%= post.content%></textarea>
      </label>
      <br>

      <label for="sub(s)">Subs(multi-select):
        <input type="hidden" name="post[sub_id][]" value="">
        <% Sub.all.each do |subbie| %>
          <%= subbie.title %><input type="checkbox" name="post[sub_id]"
          value= <%= subbie.id%> <%= "checked" if post.persisted? && post.subs.include?(subbie.id) %>>
        <% end %>
      </label>
      <br>

      <input type="submit"
      value= <%=
                if post.persisted?
                "Create New Post"
                else
                "Update Post"
                end
                %> >

    </form>
  </body>
</html>
